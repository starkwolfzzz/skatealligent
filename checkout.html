<?php
require('php/functions.php');

if (!isset($_COOKIE["session"]) || checkSession($_COOKIE["session"]) == "session is incorrect") {
    header("location: http://skatealligent.tk/login.html?redirect=" . (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]");
}
?>

    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="color-scheme" content="dark">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Skate Alligent - Cart</title>
        <link rel="icon" type="image/png" href="images/Icon.png">
        <link rel="stylesheet" href="css/style.css">
        <link href="fontawesome-free-5.15.3-web/css/all.css" rel="stylesheet">
    </head>

    <body>
        <div class="font_credit">Font made from <a href="http://www.onlinewebfonts.com">oNline Web Fonts</a> is licensed by CC BY 3.0</div>
        <meta name="color-scheme" content="dark">
        <script src="https://unpkg.com/ionicons@5.5.1/dist/ionicons.js"></script>
        <div class="header">
            <div class="container">
                <div class="navbar2" id="headerr" style="background-color: #160a22; position: inherit;">
                    <div class="logo-noline" id="logo">
                        <a style="color: white;" class="logo" href="/">Skate Alligent</a>
                    </div>
                    <nav>
                        <ul id="menuItems">
                            <li><a href="/">Home</a></li>
                            <li><a href="/shop.html?pg=1">Shop</a></li>
                            <li><a href="/account.html">Account</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                            <li><a href="/about.html">About</a></li>
                        </ul>
                    </nav>
                    <a href="/cart.html" class="button"><i class="fas fa-shopping-cart" aria-hidden="true"
                        style="transform: scale(0.8); transition: 0.5s ease"></i></a>
                    <a class="menu-icon" onclick="menuToggle()"><i class="fas fa-bars" aria-hidden="true"
                        style="transform: scale(0.8)"></i></a>
                </div>
            </div>
        </div>

        <!--- Cart --->
        <div class="small-container cart-pg">
            <div class="row" id="hidden-empty" style="display: none;">
                <a style="margin: 200px; margin-top: 120px; margin-bottom: -180px; font-weight: bolder; font-size: 30px;">YOUR CART IS EMPTY</a>
                <a href="shop.html?pg=1" class="cart-btn" style=" margin: 200px; cursor: pointer; border: 1px solid white; background-color: white; color: black; padding: 13px; width: 15%;">Add More Items</a>
            </div>
            <div class="row" style="background-color: rgb(40 40 40); border: 1px solid rgb(52 52 52); padding-bottom: 25px; margin-bottom: 25px; margin-right: -103px;">
                <div class="col-2" style="margin-bottom: -10px;">
                    <h3 style="margin-bottom: 25px;"><a style="border-bottom: 2px solid white;">Shipping Method</a></h3>
                    <i class="fas fa-truck"></i>
                    <i class="far fa-dot-circle" style="transform: scale(0.75) translateX(3px);"></i>
                    <a>Flat Shipping Rate - 0.00 EGP</a>
                </div>
                <div class="col-2" style="margin-bottom: -10px;">
                    <h3 style="margin-bottom: 25px;"><a style="border-bottom: 2px solid white;">Payment Method</a></h3>
                    <i class="far fa-money-bill-alt"></i>
                    <i class="far fa-dot-circle" style="transform: scale(0.75) translateX(3px);"></i>
                    <a>Cash on Delivery</a>
                </div>
            </div>
            <div class="row" style="background-color: rgb(40 40 40); border: 1px solid rgb(52 52 52); padding-bottom: 25px; margin-bottom: 25px; margin-right: -103px;">
                <div class="col" style="width: 89%; transform: translateY(10px) translateX(-50px);">
                    <h3 style="margin-bottom: 25px;"><a style="border-bottom: 2px solid white;">Shopping Cart</a></h3>
                    <table class="cart-table">
                        <tr>
                            <th style="border-right: none;">Product</th>
                            <th style="border-right: none; border-left: none;">Quantity</th>
                            <th style="border-left: none;">Subtotal</th>
                        </tr>
                        <?php
                    require('php/connection.php');
            
                    $session = $_COOKIE['session'];
            
                    $sql = "SELECT * FROM users WHERE session = '" . $session . "';";
                    $query = mysqli_query($conn, $sql);
                    $rows = mysqli_num_rows($query);
    
                    $cartList;
                    $quanList;
                    $id;
            
                    if ($rows == 1) {
                        while ($row = mysqli_fetch_assoc($query)) {
                            $id = $row['id'];
                            $cartList = explode(", ", $row['cart']);
                            $quanList = explode(", ", $row['cartCount']);
                        }
                    }
    
                    if($cartList[0] != ""){
                        for($i = 0; $i < count($cartList); $i++){
                            $sqli = "SELECT * FROM Products WHERE ID = '" . $cartList[$i] . "';";
                            $queryi = mysqli_query($conn, $sqli);
                            $rowsi = mysqli_num_rows($queryi);
        
                            if($rowsi > 0){
                                while ($rowi = mysqli_fetch_assoc($queryi)){
                                    echo '<tr class="item-cell">';
                                    echo '<td>';
                                    echo '<div class="cart-info">';
                                    echo '<img src="products/' . $rowi['ID'] . '.png" style="cursor: pointer;" onclick="switchPg(' . "'/product.html?id=" . $rowi['ID'] . "'" . ')">';
                                    echo '<div>';
                                    echo '<a style="cursor: pointer;" href="/product.html?id=' . $rowi['ID'] . '" id="link">' . $rowi['Name'] . '</a>';
                                    echo '<br>';
                                    echo "<a class='prodid' style='display: none';>" . $rowi['ID'] . "</a>";
                                    echo "<a class='productStock' style='display: none';>" . $rowi['Stock'] . "</a>";
                                    echo '<small>EGP ' . intval($rowi['Price']) . '</small>';
                                    echo '<br>';
                                    echo '<small class="discount">Discount: EGP ' . intval($rowi['Sale']) . '</small>';
                                    echo '<br>';
                                    echo '</div>';
                                    echo '</div>';
                                    echo '</td>';
                                    echo '<td>';
                                    echo '<input type="number" value="' . $quanList[$i] . '" min="1" max="100" class="inputQuan" onfocusout="inputValueCheck(' . $i . ')"> &nbsp;';
                                    echo '<a class="remove-btns" id="link" onclick="removeItem(' . $i . ', ' . "'btn'" . ')">Remove</a> &nbsp;';
                                    echo '</td>';
                                    echo '<td>EGP ' . intval($rowi['Price'] * $quanList[$i]) . '</td>';
                                    echo '</tr>';
                                }
                            }
                        }
        
                        echo "<a id='userid' style='display: none';>" . $id . "</a>";
                    }
                    ?>
                    </table>
                    <div class="total-price" style="background-color: black;">
                        <table style="background-color: black; border-top: 0px solid white;">
                            <tr>
                                <td>Subtotal</td>
                                <td>EGP 0.00</td>
                            </tr>
                            <tr>
                                <td>Discount</td>
                                <td>EGP 0.00</td>
                            </tr>
                            <tr>
                                <td>Shipping</td>
                                <td>EGP 0.00</td>
                            </tr>
                            <tr>
                                <td>Total</td>
                                <td>EGP 0.00</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row" style="background-color: rgb(40 40 40); border: 1px solid rgb(52 52 52); padding-bottom: 25px; margin-bottom: 25px; margin-right: -103px;">
                <div class="col" id="col" style="width: 89%; transform: translateY(10px) translateX(-50px);">
                    <h3 style="margin-bottom: 25px;"><a style="border-bottom: 2px solid white;">Delivery Address</a></h3>
                    <form class="CheckoutForm" id="form1" onsubmit="submitForm2(); return false">
                        <div class="addressInputs"><label for="Apartment">Apartment Number*</label><input class="innput" id="Apartment" name="Apartment" type="text" placeholder="Apartment Number" required oninvalid="this.setCustomValidity('Please enter the number of your apartment, or house')"
                                oninput="this.setCustomValidity('')" title="number of apartment or house"></div>
                        <div class="addressInputs" style="margin-top: -30px;"><label for="Building">Building Number*</label><input class="innput" id="Building" name="Building" type="text" placeholder="Building Number" required oninvalid="this.setCustomValidity('Please enter the number of your building')"
                                oninput="this.setCustomValidity('')" title="Number of your building"></div>
                        <div class="addressInputs" style="margin-top: -30px;"><label for="Street">Street*</label><input class="innput" id="Street" name="Street" type="text" placeholder="Street" required oninvalid="this.setCustomValidity('Please enter the street where you live')" oninput="this.setCustomValidity('')"
                                title="Street where you live"></div>
                        <div class="addressInputs" style="margin-top: -30px;"><label for="City">City*</label><input class="innput" id="City" name="City" type="text" placeholder="City" required oninvalid="this.setCustomValidity('Please enter the city of your residence')" oninput="this.setCustomValidity('')"
                                title="City of your residence"></div>
                        <div class="addressInputs" style="margin-top: -30px;"><label for="Region">Region/State*</label><input class="innput" id="Region" name="Region" type="text" placeholder="Region/State" required oninvalid="this.setCustomValidity('Please enter the region or state of your residence')" oninput="this.setCustomValidity('')"
                                title="Region or state of your residence"></div>
                        <div class="addressInputs" style="margin-top: -30px;"><label for="Country">Country*</label><input class="innput" id="Country" name="Country" type="text" placeholder="Country" required oninvalid="this.setCustomValidity('Please enter the country of your residence')" oninput="this.setCustomValidity('')"
                                title="Country of your residence"></div>
                        <div class="addressInputs" style="margin-top: -30px;"><label for="noArrows">Postal Code*</label><input class="innput" id="noArrows" name="Postal" type="number" placeholder="Postal Code" required oninvalid="this.setCustomValidity('Please enter a valid postal code')" oninput="this.setCustomValidity('')"
                                title="Please enter your postal code here"></div>
                        <div class="addressInputs" style="margin-top: -30px; margin-bottom: -40px;"><label for="noArrows2">Phone Number*</label><input class="innput" id="noArrows2" name="Phone" type="number" placeholder="01x xxxx xxxx" required oninvalid="this.setCustomValidity('Please enter a valid phone number')" oninput="this.setCustomValidity('')"
                                title="Please enter your phone number so we can contact you" maxlength="11"></div>
                        <input class="submit" type="submit" style="display: none;">
                    </form>
                </div>
            </div>
            <div class="row" style="background-color: rgb(40 40 40); border: 1px solid rgb(52 52 52); padding-bottom: 25px; margin-bottom: 25px; margin-right: -103px;">
                <div class="col" id="col" style="width: 89%; transform: translateY(10px) translateX(-50px);">
                    <h3 style="margin-bottom: 25px;"><a style="border-bottom: 2px solid white;">Confirm your order</a></h3>
                    <form class="CheckoutForm" id="form2" onsubmit="checkout(); return false">
                        <textarea id="orderComments" placeholder="Add Comments About Your Order" title="Add any extra things you want to let us know about your order"></textarea>
                        <div class="checkbox"><label for="checkbox1"><input type="checkbox" name="checkbox1" id="checkbox1" required oninvalid="this.setCustomValidity('Please agree to the privacy policy to proceed')" oninput="this.setCustomValidity('')" title="Checking this confirms your acceptance to our privacy policy"> I have read and agreed to the <a href="/privacy-policy.html">Privacy Policy</a>.</label></div>
                        <div class="checkbox"><label for="checkbox2"><input type="checkbox" name="checkbox2" id="checkbox2" required oninvalid="this.setCustomValidity('Please agree to the terms of service to proceed')" oninput="this.setCustomValidity('')" title="Checking this confirms your acceptance to our terms of service"> I have read and agreed to the <a href="/terms-of-use.html">Terms of Service</a>.</label></div>
                        <p class="carty-btn" onclick="submitForm1()"><a>Confirm Order &#8594;</a></p>
                        <input class="submit" type="submit" style="display: none;">
                    </form>
                </div>
            </div>
        </div>

        <!--- Cookie Notice --->
        <div class="cookies">
            <div class="container">
                <div class="row">
                    <div class="col-2" style="text-align: right;">
                        <p>We use cookies to enhance your experience with our website.</p>
                        <p>By continuing to use the site, you agree to the use of cookies.</p>
                    </div>
                    <div class="col-2" style="text-align: left;">
                        <a class="cookie-btn" id="link" onclick="acceptCookies()">Accept Cookies</a>
                        <a class="cookie-btn" id="link" href="/cookie-policy.html" style="color: white;">Learn More</a>
                    </div>
                </div>
            </div>
        </div>


        <!--- Footer --->
        <div class="footer" id="sec4">
            <div class="container">
                <div class="row">
                    <div class="footer-col-1">
                        <img src="images/Logo.png" style="cursor: pointer;" onclick="switchPg('/index.html')">
                    </div>
                    <div class="footer-col-2">
                        <h3>Useful Links</h3>
                        <ul>
                            <li><a href="/account.html" style="color: #8a8a8a;" id="link">My Account</a></li>
                            <li><a href="/cart.html" style="color: #8a8a8a;" id="link">Shopping Cart</a></li>
                            <li><a href="/refund-policy.html" style="color: #8a8a8a;" id="link">Refund Policy</a></li>
                            <li><a href="/about.html" style="color: #8a8a8a;" id="link">About</a></li>
                        </ul>
                    </div>
                    <div class="footer-col-3">
                        <h3>Follow Us</h3>
                        <ul>
                            <li><a href="" style="color: #8a8a8a;" id="link">Facebook</a></li>
                            <li><a href="" style="color: #8a8a8a;" id="link">Instagram</a></li>
                            <li><a href="" style="color: #8a8a8a;" id="link">Twitter</a></li>
                            <li><a href="" style="color: #8a8a8a;" id="link">Youtube</a></li>
                        </ul>
                    </div>
                </div>
                <hr>
                <p class="copyright">Copyright © 2021 Skate Alligent. All rights reserved. <a class="link" href="/terms-of-use.html">Terms of use </a> | <a class="link" href="/privacy-policy.html"> Privacy Policy</a>
                </p>
            </div>
        </div>

        <!-- loading -->
        <div class="form-overlay" style="position: fixed;">
            <div class="overlay-bg"></div>
            <img src="images/loading.png" class="loading">
        </div>

        <!-- user info -->
        <div class="php" style="display: none;">
            <?php
        require('php/connection.php');

        $session = $_COOKIE['session'];

        $sql = "SELECT * FROM users WHERE session = '" . $session . "';";
        $query = mysqli_query($conn, $sql);
        $rows = mysqli_num_rows($query);

        if ($rows == 1) {
            while ($row = mysqli_fetch_assoc($query)) {
                $sql2 = "SELECT * FROM addresses WHERE id = " . $row['id'] . ";";
                $query2 = mysqli_query($conn, $sql2);
                $rows2 = mysqli_num_rows($query2);

                if ($rows2 == 1) {
                    while ($row2 = mysqli_fetch_assoc($query2)) {
                        echo "<a id='uid'>" . $row['id'] . "</a>";
                        echo "<a id='pnumber'>" . $row['pnumber'] . "</a>";
                        echo "<!-- Address -->";
                        echo "<a id='adId'>" . $row2['id'] . "</a>";
                        echo "<a id='apartment'>" . $row2['apartment'] . "</a>";
                        echo "<a id='building'>" . $row2['building'] . "</a>";
                        echo "<a id='street'>" . $row2['street'] . "</a>";
                        echo "<a id='city'>" . $row2['city'] . "</a>";
                        echo "<a id='region'>" . $row2['region'] . "</a>";
                        echo "<a id='country'>" . $row2['country'] . "</a>";
                        echo "<a id='postal'>" . $row2['postal'] . "</a>";
                    }
                }
            }
        }
        ?>
        </div>

        <!--- notif --->
        <div class="notif" id="hide" style="color: #160a22; background-color: white; position: fixed;">
            <i class="fas fa-exclamation"></i>
            <a id="notifText" class="notifText" style="font-size: 20px;">Couldn't place order.</a>
        </div>

        <!--- JavaScript --->
        <script>
            // <-- Menu -->
            var MenuItems = document.getElementById("menuItems");

            MenuItems.style.maxHeight = "0px";

            function menuToggle() {
                if (MenuItems.style.maxHeight == "0px") {
                    MenuItems.style.maxHeight = "200px";
                } else {
                    MenuItems.style.maxHeight = "0px";
                }
            }

            // <-- Products Href -->
            function prodPg() {
                location.href = "/product.html?id=" + "id";
            }

            // <-- Switch Page -->
            function switchPg(pg) {
                location.href = pg;
            }

            // <-- Input Value -->
            function inputValueCheck(n) {
                let input = document.getElementsByClassName("inputQuan");

                if (input[n].value == 0) {
                    removeItem(n, "input");

                    let inputs = document.getElementsByClassName("inputQuan");
                    for (i = 0; i < inputs.length; i++) {
                        inputs[i].setAttribute("onChange", 'inputValueCheck(' + i + ')');
                    }
                }

                let productStock = document.getElementsByClassName('productStock');
                var x = parseInt(productStock[n].innerHTML);
                if (x > 100) {
                    if (input[n].value > 100) {
                        input[n].value = '100';
                    } else if (input[n].value < 1) {
                        input[n].value = '1';
                    } else if (input[n].value.toString().includes(".")) {
                        input[n].value = input[n].value.toString().substr(0, input[n].value.toString().indexOf("."))
                    }
                } else {
                    if (input[n].value > x) {
                        input[n].value = '' + x + '';
                    } else if (input[n].value < 1) {
                        input[n].value = '1';
                    } else if (input[n].value.toString().includes(".")) {
                        input[n].value = input[n].value.toString().substr(0, input[n].value.toString().indexOf("."))
                    }
                }

                let prodid = document.getElementsByClassName("prodid")[n].textContent;
                let id = document.getElementById("userid");
                loading(true);

                var form_data = new FormData();

                form_data.append("cartQuanUId", id.innerHTML);
                form_data.append("cartQuanID", prodid);
                form_data.append("cartQuant", input[n].value);

                var ajax_request = new XMLHttpRequest();

                ajax_request.open('POST', 'php/process_data.php');

                ajax_request.send(form_data);

                ajax_request.onreadystatechange = function() {
                    if (ajax_request.readyState == 4 && ajax_request.status == 200) {

                        var response = ajax_request.responseText;

                        if (response == "Changed Quantity") {
                            loading(false);
                            location.reload();
                        } else {
                            loading(false);
                        }
                    }
                }
            }

            // <-- Remove Item -->
            function removeItem(n, type) {
                let parents = document.getElementsByClassName("item-cell");
                let prodid = document.getElementsByClassName("prodid")[n].textContent;
                let id = document.getElementById("userid");
                let input = document.getElementsByClassName("inputQuan")[n].value;
                loading(true);

                var form_data = new FormData();

                form_data.append("cartItemId", id.innerHTML);
                form_data.append("cartItemID", prodid);
                form_data.append("cartItemQuan", input);

                var ajax_request = new XMLHttpRequest();

                ajax_request.open('POST', 'php/process_data.php');

                ajax_request.send(form_data);

                ajax_request.onreadystatechange = function() {
                    if (ajax_request.readyState == 4 && ajax_request.status == 200) {

                        var response = ajax_request.responseText;

                        if (response == "removed from cart") {
                            loading(false);
                            location.reload();
                        } else {
                            loading(false);
                        }
                    }
                }
            }

            // <-- Prices and stuff -->
            function changePrices(n, n2) {
                let parent = document.getElementsByClassName("item-cell");
                var text = parent[n2].children[0].children[0].children[1].children[4].textContent;
                var x = parseInt(parseInt(parent[n2].children[0].children[0].children[1].children[4].textContent.substring('EGP '.length, text.length)) * n);
                if (x.toString().length <= 2) {
                    parent[n2].children[2].textContent = "EGP " + parseInt(x) + ".00";
                } else if (x.toString().length > 2) {
                    parent[n2].children[2].textContent = "EGP " + parseInt(x);
                }
                updateTotals();
            }

            // <-- Totals -->
            updateTotals();

            function updateTotals() {
                let parentt = document.getElementsByClassName("total-price");
                let Subtotall = parentt[0].children[0].children[0].children[0].children[1];
                let discountt = parentt[0].children[0].children[0].children[1].children[1];
                let shipping = parentt[0].children[0].children[0].children[2].children[1];
                let Totall = parentt[0].children[0].children[0].children[3].children[1];
                let cons = document.getElementsByClassName("item-cell");
                var numbers = [];
                var subtotal = 0;
                var discounts = document.getElementsByClassName("discount");
                var discount = 0;

                for (i = 0; i < discounts.length; i++) {
                    var mul = cons[i].children[2].innerHTML.substr("EGP ".length) / cons[i].children[0].children[0].children[1].children[4].textContent.substr("EGP ".length);
                    discount += parseInt(discounts[i].innerHTML.substr("Discount: EGP ".length)) * mul;
                }

                for (i = 0; i < cons.length; i++) {
                    numbers.push(cons[i].children[2].textContent.substr("EGP ".length));
                }

                for (i = 0; i < numbers.length; i++) {
                    subtotal += parseInt(numbers[i]);
                }

                Subtotall.textContent = "EGP " + subtotal;
                discountt.textContent = "EGP " + discount;
                Totall.textContent = "EGP " + parseInt(parseInt(subtotal - discount) + parseInt(shipping.innerHTML.substr("EGP ".length)));
            }

            // <-- Check If Empty -->
            checkIfEmpty();

            function checkIfEmpty() {
                let parents = document.getElementsByClassName("item-cell");
                if (parents.length == 0) {
                    let row = document.getElementById("hidden-empty");
                    row.style.display = "flex";
                    let cont = document.getElementsByClassName("small-container");

                    cont[0].children[1].remove();
                    cont[0].children[1].remove();
                    cont[0].children[1].remove();
                    cont[0].children[1].remove();
                }
            }

            // <-- Cookie Consent -->
            let cSection = document.getElementsByClassName("cookies");
            let cCont = cSection[0].children[0];
            checkCookies();

            function checkCookies() {
                if (getCookie("CookieConsent") == null) {
                    cFunc("show");
                } else {
                    cFunc("hide");
                }
            }

            function acceptCookies() {
                cFunc("hide");
                setCookie("CookieConsent", "true");
            }

            function cFunc(n) {
                if (n == "show") {
                    cCont.style.top = parseInt(parseInt(window.innerHeight) - 80) + "px";
                } else if (n == "hide") {
                    cCont.style.top = window.innerHeight + "px";
                }
            }

            function setCookie(key, value) {
                var expires = new Date();
                expires.setTime(expires.getTime() + (10000 * 365 * 24 * 60 * 60));
                document.cookie = key + '=' + value + ';expires=' + expires.toUTCString();
            }

            function getCookie(key) {
                var keyValue = document.cookie.match('(^|;) ?' + key + '=([^;]*)(;|$)');
                return keyValue ? keyValue[2] : null;
            }

            // <-- Submit Form -->
            let form1 = document.getElementById("form1");
            let form2 = document.getElementById("form2");
            let btns = document.getElementsByClassName("submit")

            //loading
            function loading(con, n = 0) {
                if (con == true) {
                    document.getElementsByClassName("form-overlay")[n].classList.add("ovlyact");
                } else {
                    document.getElementsByClassName("form-overlay")[n].classList.remove("ovlyact");
                }
            }

            //notif
            function notification() {
                let notif = document.getElementsByClassName("notif")[0];
                let textNo = notif.children[1];

                textNo.style.fontSize = "20px";
                textNo.textContent = "Couldn't place order.";
                notif.id = "show";
                setTimeout(function() {
                    notif.id = "hide";
                }, 5000);
            }

            // <-- Input Values of inputs yknow -->
            let apt = document.getElementById("Apartment");
            let aptt = document.getElementById("apartment").innerHTML;
            apt.value = aptt;

            let bld = document.getElementById("Building");
            let bldd = document.getElementById("building").innerHTML;
            bld.value = bldd;

            let strt = document.getElementById("Street");
            let strtt = document.getElementById("street").innerHTML;
            strt.value = strtt;

            let cty = document.getElementById("City");
            let ctyy = document.getElementById("city").innerHTML;
            cty.value = ctyy;

            let rgn = document.getElementById("Region");
            let rgnn = document.getElementById("region").innerHTML;
            rgn.value = rgnn;

            let ctry = document.getElementById("Country");
            let ctryy = document.getElementById("country").innerHTML;
            ctry.value = ctryy;

            let pst = document.getElementById("noArrows");
            let pstt = document.getElementById("postal").innerHTML;
            pst.value = pstt;

            let nom = document.getElementById("noArrows2");
            let nomm = document.getElementById("pnumber").innerHTML;
            nom.value = nomm;

            // <-- renew address and number -->
            function submitForm1() {
                apt = document.getElementById("Apartment").value;
                aptt = document.getElementById("apartment").innerHTML;

                bld = document.getElementById("Building").value;
                bldd = document.getElementById("building").innerHTML;

                strt = document.getElementById("Street").value;
                strtt = document.getElementById("street").innerHTML;

                cty = document.getElementById("City").value;
                ctyy = document.getElementById("city").innerHTML;

                rgn = document.getElementById("Region").value;
                rgnn = document.getElementById("region").innerHTML;

                ctry = document.getElementById("Country").value;
                ctryy = document.getElementById("country").innerHTML;

                pst = document.getElementById("noArrows").value;
                pstt = document.getElementById("postal").innerHTML;

                nom = document.getElementById("noArrows2").value;
                nomm = document.getElementById("pnumber").innerHTML;

                if (apt != aptt || bld != bldd || strt != strtt || cty != ctyy || rgn != rgnn || ctry != ctryy || pst != pstt || nom != nomm) {
                    loading(true);

                    var form_data = new FormData();

                    form_data.append("adId", adId.innerHTML);
                    form_data.append("uid", uid.innerHTML);
                    form_data.append("apartment", apt);
                    form_data.append("building", bld);
                    form_data.append("street", strt);
                    form_data.append("city", cty);
                    form_data.append("region", rgn);
                    form_data.append("country", ctry);
                    form_data.append("postal", pst);
                    form_data.append("number", nom);

                    //document.getElementsByClassName('logSubmit')[0].disabled = true;

                    var ajax_request = new XMLHttpRequest();

                    ajax_request.open('POST', 'php/process_data.php');

                    ajax_request.send(form_data);

                    ajax_request.onreadystatechange = function() {
                        if (ajax_request.readyState == 4 && ajax_request.status == 200) {

                            var response = ajax_request.responseText;

                            loading(false);
                            location.reload();
                        }
                    }
                } else {
                    btns[0].click();
                }
            }

            function submitForm2() {
                btns[1].click();
            }

            // <-- Checkout -->
            function checkout() {
                loading(true);

                var form_data = new FormData();

                form_data.append("orderUserId", uid.innerHTML);
                form_data.append("orderShipping", 0);
                form_data.append("orderComments", document.getElementById("orderComments").value);

                //document.getElementsByClassName('logSubmit')[0].disabled = true;

                var ajax_request = new XMLHttpRequest();

                ajax_request.open('POST', 'php/process_data.php');

                ajax_request.send(form_data);

                ajax_request.onreadystatechange = function() {
                    if (ajax_request.readyState == 4 && ajax_request.status == 200) {

                        var response = ajax_request.responseText;

                        if (response == "Placed Order") {
                            loading(false);
                            notification(true);
                        } else {
                            loading(false);
                            notification(false);
                        }
                    }
                }
            }

            // <-- notif -->
            function notification(status) {
                let notif = document.getElementsByClassName("notif")[0];
                let textNo = notif.children[1];

                if (status == true) {
                    textNo.style.fontSize = "20px";
                    textNo.textContent = "Order has been placed.";
                    notif.id = "show";
                    setTimeout(function() {
                        notif.id = "hide";
                        location.href = "/account.html?pg=orders";
                    }, 5000);
                } else {
                    textNo.style.fontSize = "18px";
                    textNo.textContent = "Couldn't Place Order.";
                    notif.id = "show";
                    setTimeout(function() {
                        notif.id = "hide";
                    }, 5000);
                }
            }
        </script>
    </body>

    </html>